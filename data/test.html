<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>WiFi Monitor Test</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            background: #f5f5f5;
        }
        .test-card {
            background: white;
            padding: 20px;
            margin: 10px 0;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        button {
            background: #007bff;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 4px;
            cursor: pointer;
            margin: 5px;
        }
        button:hover {
            background: #0056b3;
        }
        .result {
            background: #f8f9fa;
            padding: 10px;
            border-radius: 4px;
            margin: 10px 0;
            white-space: pre-wrap;
            font-family: monospace;
        }
    </style>
</head>
<body>
    <h1>üîß WiFi Monitor Test Page</h1>
    
    <div class="test-card">
        <h3>üìä Data Collection Test</h3>
        <button onclick="collectKPI()">Collect KPI Now</button>
        <button onclick="checkStatus()">Check Status</button>
        <button onclick="viewHistory()">View History</button>
        <button onclick="debugInfo()">Debug Info</button>
        <div id="result1" class="result"></div>
    </div>

    <div class="test-card">
        <h3>üìà Chart Data Test</h3>
        <button onclick="getToday()">Get Today's Data</button>
        <button onclick="getLast1Day()">Get Last 1 Day</button>
        <button onclick="getLast5Days()">Get Last 5 Days</button>
        <button onclick="testNoise()">Test Noise Data</button>
        <div id="result2" class="result"></div>
    </div>

    <div class="test-card">
        <h3>üîó Quick Links</h3>
        <button onclick="window.location.href='/dashboard.html'">Go to Dashboard</button>
        <button onclick="window.location.href='/'">Go to Home</button>
    </div>

    <script>
        function collectKPI() {
            document.getElementById('result1').textContent = 'Collecting KPI...';
            fetch('/collect')
                .then(response => response.text())
                .then(data => {
                    document.getElementById('result1').textContent = `‚úÖ ${data}`;
                })
                .catch(error => {
                    document.getElementById('result1').textContent = `‚ùå Error: ${error}`;
                });
        }

        function checkStatus() {
            document.getElementById('result1').textContent = 'Checking status...';
            fetch('/status')
                .then(response => response.json())
                .then(data => {
                    document.getElementById('result1').textContent = `Status:\n${JSON.stringify(data, null, 2)}`;
                })
                .catch(error => {
                    document.getElementById('result1').textContent = `‚ùå Error: ${error}`;
                });
        }

        function viewHistory() {
            document.getElementById('result1').textContent = 'Loading history...';
            fetch('/history?range=0')
                .then(response => response.json())
                .then(data => {
                    document.getElementById('result1').textContent = `History (${data.length} records):\n${JSON.stringify(data, null, 2)}`;
                })
                .catch(error => {
                    document.getElementById('result1').textContent = `‚ùå Error: ${error}`;
                });
        }

        function getToday() {
            document.getElementById('result2').textContent = 'Loading today\'s data...';
            fetch('/history?range=0')
                .then(response => response.json())
                .then(data => {
                    document.getElementById('result2').textContent = `Today's Data (${data.length} records):\n${JSON.stringify(data.slice(-5), null, 2)}`;
                })
                .catch(error => {
                    document.getElementById('result2').textContent = `‚ùå Error: ${error}`;
                });
        }

        function getLast1Day() {
            document.getElementById('result2').textContent = 'Loading last 1 day...';
            fetch('/history?range=1')
                .then(response => response.json())
                .then(data => {
                    document.getElementById('result2').textContent = `Last 1 Day (${data.length} records):\n${JSON.stringify(data.slice(-5), null, 2)}`;
                })
                .catch(error => {
                    document.getElementById('result2').textContent = `‚ùå Error: ${error}`;
                });
        }

        function getLast5Days() {
            document.getElementById('result2').textContent = 'Loading last 5 days...';
            fetch('/history?range=5')
                .then(response => response.json())
                .then(data => {
                    document.getElementById('result2').textContent = `Last 5 Days (${data.length} records):\n${JSON.stringify(data.slice(-5), null, 2)}`;
                })
                .catch(error => {
                    document.getElementById('result2').textContent = `‚ùå Error: ${error}`;
                });
        }

        function debugInfo() {
            document.getElementById('result1').textContent = 'Loading debug info...';
            fetch('/debug')
                .then(response => response.text())
                .then(data => {
                    document.getElementById('result1').textContent = data;
                })
                .catch(error => {
                    document.getElementById('result1').textContent = `‚ùå Error: ${error}`;
                });
        }

        function testNoise() {
            document.getElementById('result2').textContent = 'Testing noise data...';
            fetch('/testnoise')
                .then(response => response.json())
                .then(data => {
                    document.getElementById('result2').textContent = `Test Noise Data (${data.length} records):\n${JSON.stringify(data, null, 2)}`;
                })
                .catch(error => {
                    document.getElementById('result2').textContent = `‚ùå Error: ${error}`;
                });
        }
    </script>
</body>
</html>
